#!/bin/bash

echo "๐ ุดุฑูุน ุฏูพูู ุจุฑูุงูู..."

# ูุตุจ ูุงุจุณุชฺฏโูุง
echo "๐ฆ ูุตุจ ูุงุจุณุชฺฏโูุง..."
npm install

# ุณุงุฎุช ุฏุชุงุจุณ
echo "๐๏ธ ุฑุงูโุงูุฏุงุฒ ุฏุชุงุจุณ..."
docker-compose up -d

# ุงุฌุฑุง ูุงฺฏุฑุดูโูุง
echo "๐ ุงุฌุฑุง ูุงฺฏุฑุดูโูุง ุฏุชุงุจุณ..."
npx prisma migrate deploy

# ุณุงุฎุช ูุณุฎู ุชููุฏ
echo "๐๏ธ ุณุงุฎุช ูุณุฎู ุชููุฏ..."
npm run build

# ุฑุงูโุงูุฏุงุฒ ุจุฑูุงูู
echo "๐ ุฑุงูโุงูุฏุงุฒ ุจุฑูุงูู..."
pm2 delete todo-app || true
pm2 start npm --name "todo-app" -- start

echo "โ ุฏูพูู ุจุง ููููุช ุงูุฌุงู ุดุฏ!" 